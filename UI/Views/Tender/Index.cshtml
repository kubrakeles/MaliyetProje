@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section cssVendorSpecification{
    <link rel="stylesheet" type="text/css" href="~/app-assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="~/app-assets/vendors/css/tables/datatable/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="~/app-assets/vendors/css/tables/datatable/responsive.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="~/app-assets/vendors/css/pickers/flatpickr/flatpickr.min.css">
}

    @section cssPageSpecification
    {

    <link rel="stylesheet" type="text/css" href="~/app-assets/css/core/menu/menu-types/vertical-menu.css">
    <link rel="stylesheet" type="text/css" href="~/app-assets/css/plugins/forms/form-validation.css">
    <link rel="stylesheet" type="text/css" href="~/app-assets/css/plugins/forms/form-wizard.css">
}

    <!-- BEGIN: Content-->
        <div class="content-wrapper">
            <div class="content-header row">
                <div class="content-header-left col-md-9 col-12 mb-2">
                    <div class="row breadcrumbs-top">
                        <div class="col-12">
                            <h2 class="content-header-title float-left mb-0">Yarışma</h2>
                            <div class="breadcrumb-wrapper">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item">
                                        <a href="index.html">Dashboard</a>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="#">İhaleler</a>
                                    </li>
                                    <li class="breadcrumb-item active">
                                       Maliyet Aşamaları
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="content-body">
                <!-- Responsive Datatable -->
                <section id="responsive-datatable">
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header border-bottom">
                                    <h4 class="card-title">İhale Listesi</h4>
                                    <a class="btn btn-gradient-success" asp-action="AddTender" asp-controller="Tender"> <span class="menu-item text-truncate" data-i18n="Clipboard">Yeni İhale</span></a>
                                </div>
                                <div class="card-datatable">
                                    <table class="dt-responsive table">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>İşin Adı</th>
                                                <th>İhale Türü</th>
                                                <th>Birim</th>
                                               <th>İhalenin Geldiği Tarih</th>
                                               <th>Durumu</th>
                                               <th>İşlemler</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!--/ Responsive Datatable -->

            </div>
        </div>
    <!-- END: Content-->
    <!-- END: Content-->
    @section JsPageVendorSpecification
    {
    <script src="~/app-assets/vendors/js/tables/datatable/jquery.dataTables.min.js"></script>
    <script src="~/app-assets/vendors/js/tables/datatable/datatables.bootstrap4.min.js"></script>
    <script src="~/app-assets/vendors/js/tables/datatable/dataTables.responsive.min.js"></script>
    <script src="~/app-assets/vendors/js/tables/datatable/responsive.bootstrap4.js"></script>
    <script src="~/app-assets/vendors/js/pickers/flatpickr/flatpickr.min.js"></script>
}
    @section JsPageSpecification
    {
    <script src="~/app-assets/js/core/app-menu.js"></script>
    <script src="~/app-assets/js/core/app.js"></script>
    <!-- END: Theme JS-->
}
   

    <script type="text/javascript">
        $(function() {
            $('#').addClass('active');
            $.ajax({
                type: "GET",
                url: "/Panel/Jury/LoadJury",
                data: '{}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: OnSuccess,
                failure: function(response) {
                    alert(response.d);
                },
                error: function(response) {
                    alert(response.d);
                }
            });

        });
        function OnSuccess(response) {
            $(".dt-responsive").DataTable(
                {
                    bLengthChange: true,
                    //lengthMenu: [[5, 10, -1], [5, 10, "All"]],
                    bFilter: true,
                    bSort: true,
                    bPaginate: true,
                    data: response,
                    columns: [
                        { 'data': 'juryId' },
                        {
                            'data': 'picture',
                            "render": function(data, type, full, meta) {
                                var $output,
                                    $image = full['picture'];
                                if ($image) {
                                    // For Avatar image
                                    $output = ' <img class="card-img-top" src="' + full.picture + '" style="width:6em" />';
                                } else {
                                    // For Avatar badge
                                    $output = '<img class="card-img-top" src="~/app-assets/images/avatars/pictureDefault.png" style="width:4em" />';
                                }
                                return $output;
                            }
                        },
                        { 'data': 'fullName' },
                        { 'data': 'duty' },
                        { 'data': 'job' },
                        { 'data': 'status' },
                        {
                            "render": function(data, type, full, meta) { return '<a class="btn btn-info" href="~/Panel/Jury/JuryEdit/' + full.juryId + '">Düzenle</a>'; }
                        },
                    ],
                    columnDefs: [
                        {
                            className: 'control',
                            orderable: false,
                            targets: 0
                        },
                        {
                            // Label
                            targets: -2,
                            render: function(data, type, full, meta) {
                                var $status_number = full['status'];
                                console.log($status_number);
                                var $status = {
                                    true: { title: 'Aktif', class: ' badge-light-success' },
                                    false: { title: 'Pasif', class: ' badge-light-danger' }
                                };
                                if (typeof $status[$status_number] === 'undefined') {
                                    return data;
                                }
                                return (
                                    '<span class="badge badge-pill ' +
                                    $status[$status_number].class +
                                    '">' +
                                    $status[$status_number].title +
                                    '</span>'
                                );
                            }
                        }
                    ],
                    dom:
                        '<"d-flex justify-content-between align-items-center mx-0 row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6"f>>t<"d-flex justify-content-between mx-0 row"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>',
                    responsive: {
                        details: {
                            display: $.fn.dataTable.Responsive.display.modal({
                                header: function(row) {
                                    var data = row.data();
                                    return ' Kişi Bilgileri';
                                }
                            }),
                            type: 'column',
                            renderer: $.fn.dataTable.Responsive.renderer.tableAll({
                                tableClass: 'table'
                            })
                        }
                    },
                    language: {
                        paginate: {
                            // remove previous & next text from pagination
                            previous: '&nbsp;',
                            next: '&nbsp;'
                        }
                    }
                });
            $('.dataTables_filter .form-control').removeClass('form-control-sm');
            $('.dataTables_length .custom-select').removeClass('custom-select-sm').removeClass('form-control-sm');
        };

    </script>
    }
